{% extends mainTemplate %}

{% block content %}
    <h1>La map, la map !!!</h1>

    <div id="editor-menu">
        {{ 'editor.map.baseLand'|trans }}
        <!-- basic land type -->
        <a href="javascript:void(0);" class="btn btn-small menu-item" data-type="land" data-value="sand"
           title="{{ 'editor.map.sand' }}">{{ 'editor.map.sand'|trans }}</a>
        <a href="javascript:void(0);" class="btn btn-small menu-item" data-type="land" data-value="water"
           title="{{ 'editor.map.water' }}">{{ 'editor.map.water'|trans }}</a>
        <a href="javascript:void(0);" class="btn btn-small menu-item" data-type="land" data-value="plains"
           title="{{ 'editor.map.plains' }}">{{ 'editor.map.plains'|trans }}</a>
        <!-- remove background button -->
        <a class="btn btn-danger btn-small menu-item" data-type="land" data-value="remove"
           title="{{ 'editor.map.removeBackground' }}">
            <i class="icon-white icon-remove"></i>
        </a>
        <!-- actions buttons -->
        <a href="javascript:void(0);" class="menu-action btn btn-success btn-small" data-action="save">
            <i class="icon-white icon-ok"></i>{{ 'editor.map.save' }}
        </a>
    </div>

    <canvas id="myCanvas" width="938" height="1000" class="hero-unit" style="padding: 10px">
        It seems that your old and ugly browser does not support canvas...
    </canvas>

    <script type="text/javascript" language="javascript">
        $(document).ready(function () {
            var mapData = {{ map|raw }};
            var textures = {{ textures|raw }};

            var ur = new Unramalak.Application('myCanvas', mapData, textures);
            ur.run();

            //var test = Unramalak.ImageLoader.loadSvg('/bundles/krovitch/img/calmar_smooth.svg');
            //console.log('test', test.children);
        });
        $('#calmar').on('ready', function () {
            console.log('trace', document.getElementById('calmar'))
        })
    </script>
{% endblock %}